# GuiXu (归墟) - 一款专为 SillyTavern 设计的前端交互卡

**归墟** 是一款为 [SillyTavern](https://github.com/SillyTavern/SillyTavern) 打造的沉浸式前端交互界面卡。它通过系统化的面板交互与现代化的 UI/UX 设计，致力于在桌面和移动端提供稳定、流畅且高度自定义的叙事体验。

---

## ✨ 主要特性 (拼好卡v3.5)

**归墟拼好卡 v3.5** 是对1.8拼好卡旧版本的全面重构与升级，带来了架构、设计与核心系统的革新。

### 1. **UI/UX 全面革新**
- **界面重构**: 桌面端将核心信息整合至主界面，移动端采用悬浮菜单并支持横屏，显著提升信息可视化与操作便捷性。
- **风格统一与自定义**: 所有面板（背包、人物关系等）视觉风格统一，并新增“设置中心”，支持自定义背景、字体、分辨率，提供一键全屏、思维链折叠等功能。

### 2. **系统深化与智能管理**
- **关系与背包升级**: “人物关系”与“背包”面板功能重构，新增搜索、标签分组，并直观显示物品数量与价值。
- **自动化角色管理**: 新增自动化角色提取功能，可将 NPC 信息快速写入世界书，并支持自定义提取规则。

### 3. **更生动的世界交互**
- **NPC 维度扩展**: NPC 拥有独立的四维属性、天赋、灵根及装备系统，属性受装备影响，角色更加丰满。
- **新增交易与行动系统**: 开放功能完善的交易系统，引入价格保护与 NPC 拒绝机制。新增 `<行动方针>` 系统，玩家可通过点击选项进行更具指导性的操作。

### 4. **底层架构优化**
- **变量结构重构**: 变量由数组重构为**字典（键值对）**，彻底解决变量重复增值问题，并提高 LLM 对数值更新的准确性。
- **优化存档系统**: 存档机制重构，游戏记录直接保存至世界书，避免因清理浏览器缓存导致存档丢失。

### 5. **大量Bug的修复**

---

## ✨ 注意事项与常见问题排查

### 1. 运行环境与加载
- **网络要求:** 系统脚本通过 **JsDelivr** 加载，请务必保持良好的网络连接，否则可能导致功能异常。
- **加载失败:** 若首次开局卡在加载界面或UI渲染错乱，请尝试关闭酒馆页面后，再重新打开并读取。

### 2. 内容显示与交互
- **正文错乱:** 如正文中出现变量代码等无关内容，请使用编辑功能（小铅笔）检查，确保正文被 gametxt 标签完整包裹。
- **行动选项:** 若点击行动选项后没有反应，请同样检查并确保该选项被 action 标签正确包裹。

### 3. 存档管理与维护
- **开启新档:** 如需开启一个全新的游戏存档，您可以通过修改“读写序号”或在存档管理中心使用“**一键清除所有存档**”功能。
- **读档异常:** 读取存档后，若发现装备、物品等数据有遗漏，请尝试重新读取一遍该存档文件。

---

## 🙏 鸣谢

- **原作者**: @梦星 ([原贴地址](https://discord.com/channels/1134557553011998840/1395002325751300227))
- **二次修订**: @stone
- **特别感谢：**
    * 来自 **@zzyxpoly** 的1.81世界书整合
    * 来自 **@CrHouse** 的约束（npc反应，宏大概念，判定约束）
    * 来自 **@Tanhuax** 的古典仙道指导文风
    * 来自 **@七七七.小七** 的现实基调+抒情美好文风
    * 来自 **@Sycamore** 的数值参考借鉴
    * 来自 **@孑孓** 的开局前端
    * 来自 **@ove** 的经济体制借鉴
---

## 📜 开源协议

本项目基于 **MIT License** 开源。详情请见 [LICENSE](./LICENSE) 文件。

Copyright (c) 2025 slot
