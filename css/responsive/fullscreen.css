/*!
 * fullscreen.css — 阶段6：全屏适配集中
 * 适用范围：
 * - :fullscreen / :-webkit-full-screen（Chrome/Safari 前缀）
 * - 移动端全屏细化（含横屏：.mobile-landscape-fullscreen）
 * 作用域：限制在 .guixu-root-container 下，避免污染宿主页面
 */

/* 进入全屏：根容器铺满视口，消除底部空白，并避免被裁剪 */
.guixu-root-container:fullscreen,
.guixu-root-container:-webkit-full-screen {
  width: 100vw;
  height: 100vh;
  max-width: none;
  margin: 0;
  border-radius: 0;
  /* 防止全屏下固定/浮层被父容器裁剪（iPad/Safari 常见） */
  overflow: visible;
}
.guixu-root-container:fullscreen .game-container,
.guixu-root-container:-webkit-full-screen .game-container {
  height: 100%;
}

/* ========== 移动端全屏：通用覆盖 ========== */
/* 人物关系：全屏移动端尺寸与按钮收紧 */
.guixu-root-container:fullscreen.mobile-view #relationships-modal .modal-content,
.guixu-root-container:-webkit-full-screen.mobile-view #relationships-modal .modal-content {
  width: 90%;
  max-width: 800px;
  height: 90%;
  max-height: 550px;
}
.guixu-root-container:fullscreen.mobile-view #relationships-modal .relationship-header .rel-actions,
.guixu-root-container:-webkit-full-screen.mobile-view #relationships-modal .relationship-header .rel-actions {
  display: grid !important; /* 保持移动端网格，但用桌面尺寸 */
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  grid-auto-rows: minmax(26px, auto) !important;
  gap: 6px !important;
  width: 100% !important;
}
.guixu-root-container:fullscreen.mobile-view #relationships-modal .relationship-header .rel-actions > button,
.guixu-root-container:-webkit-full-screen.mobile-view #relationships-modal .relationship-header .rel-actions > button,
.guixu-root-container:fullscreen.mobile-view .relationship-card .btn-delete-relationship,
.guixu-root-container:-webkit-full-screen.mobile-view .relationship-card .btn-delete-relationship {
  height: 26px !important;
  padding: 0 8px !important;
  font-size: 11px !important;
  min-width: 0 !important;
  box-sizing: border-box !important;
}
/* 关系筛选标签：全屏移动端收紧到 32px */
.guixu-root-container:fullscreen.mobile-view #relationships-modal .rel-tab,
.guixu-root-container:-webkit-full-screen.mobile-view #relationships-modal .rel-tab {
  height: 32px !important;
  padding: 0 10px !important;
  font-size: 12px !important;
}

/* 存档管理：全屏移动端尺寸与按钮收紧 */
.guixu-root-container:fullscreen.mobile-view #save-load-modal .modal-content,
.guixu-root-container:-webkit-full-screen.mobile-view #save-load-modal .modal-content {
  width: 90%;
  max-width: 800px;
  height: 90%;
  max-height: 550px;
}
.guixu-root-container:fullscreen.mobile-view #save-load-modal .modal-body,
.guixu-root-container:-webkit-full-screen.mobile-view #save-load-modal .modal-body {
  overflow-y: auto;
}
.guixu-root-container:fullscreen.mobile-view #save-load-modal .save-slot-actions > button,
.guixu-root-container:-webkit-full-screen.mobile-view #save-load-modal .save-slot-actions > button,
.guixu-root-container:fullscreen.mobile-view #save-load-modal .slot-actions > button,
.guixu-root-container:-webkit-full-screen.mobile-view #save-load-modal .slot-actions > button,
.guixu-root-container:fullscreen.mobile-view #save-load-modal .interaction-btn,
.guixu-root-container:-webkit-full-screen.mobile-view #save-load-modal .interaction-btn,
.guixu-root-container:fullscreen.mobile-view #save-load-modal .clear-saves-btn,
.guixu-root-container:-webkit-full-screen.mobile-view #save-load-modal .clear-saves-btn {
  height: 32px !important;
  padding: 0 12px !important;
  font-size: 12px !important;
  min-width: 0;
  box-sizing: border-box;
}
.guixu-root-container:fullscreen.mobile-view #save-load-modal .save-slot,
.guixu-root-container:-webkit-full-screen.mobile-view #save-load-modal .save-slot {
  gap: 10px;
}

/* 指令中心：全屏移动端尺寸与按钮收紧（参照设置中心面板布局） */
.guixu-root-container:fullscreen.mobile-view #command-center-modal .modal-content,
.guixu-root-container:-webkit-full-screen.mobile-view #command-center-modal .modal-content {
  width: 90%;
  max-width: 800px;
  height: 90%;
  max-height: 550px;
}
.guixu-root-container:fullscreen.mobile-view #command-center-modal .command-center-footer,
.guixu-root-container:-webkit-full-screen.mobile-view #command-center-modal .command-center-footer {
  flex-wrap: wrap !important;
  gap: 8px !important;
  align-items: stretch !important;
}
.guixu-root-container:fullscreen.mobile-view #command-center-modal #btn-refresh-storage,
.guixu-root-container:-webkit-full-screen.mobile-view #command-center-modal #btn-refresh-storage {
  flex: 1 1 100% !important;
  height: 32px !important;
  min-width: 0 !important;
}
.guixu-root-container:fullscreen.mobile-view #command-center-modal .command-center-footer > div,
.guixu-root-container:-webkit-full-screen.mobile-view #command-center-modal .command-center-footer > div {
  width: 100% !important;
  display: grid !important;
  grid-template-columns: 1fr 1fr !important; /* 应用/保存并关闭 两列并排 */
  gap: 8px !important;
}
.guixu-root-container:fullscreen.mobile-view #command-center-modal .command-center-footer > div > button,
.guixu-root-container:-webkit-full-screen.mobile-view #command-center-modal .command-center-footer > div > button {
  width: 100% !important;
  height: 32px !important;
  min-width: 0 !important;
  padding: 0 12px !important;
  box-sizing: border-box !important;
}
.guixu-root-container:fullscreen.mobile-view #command-center-modal .command-center-actions .command-center-action-item,
.guixu-root-container:-webkit-full-screen.mobile-view #command-center-modal .command-center-actions .command-center-action-item {
  padding: 4px 8px;
  font-size: 12px;
}

/* 快速发送区：全屏移动端，两键/输入统一 40px 高度 */
.guixu-root-container:fullscreen.mobile-view .quick-send-container .qs-left.qs-left--two-btn #btn-first-run-refresh,
.guixu-root-container:fullscreen.mobile-view .quick-send-container .qs-left.qs-left--two-btn #btn-reroll-last,
.guixu-root-container:-webkit-full-screen.mobile-view .quick-send-container .qs-left.qs-left--two-btn #btn-first-run-refresh,
.guixu-root-container:-webkit-full-screen.mobile-view .quick-send-container .qs-left.qs-left--two-btn #btn-reroll-last {
  height: 40px !important;
  padding: 0 12px !important;
  width: auto !important;
  flex: 0 0 auto !important;
  min-width: 96px !important;     /* 中文四字不拥挤 */
  white-space: nowrap !important;
  line-height: normal !important;
}

/* ========== 移动端“横屏”全屏：底部栏固定与输入区域居中 ========== */
.guixu-root-container.mobile-view.mobile-landscape-fullscreen .bottom-status {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0; /* 使用视口底部 */
  z-index: 10010;
  width: 100vw;
  max-width: 100vw;
  box-sizing: border-box;
  padding: 6px 12px calc(6px + env(safe-area-inset-bottom, 0));
  gap: 10px;
  background: linear-gradient(90deg,
      rgba(45, 27, 61, 0.9) 0%,
      rgba(26, 26, 46, 0.92) 50%,
      rgba(45, 27, 61, 0.9) 100%);
  border-top: 1px solid #c9aa71;
  min-height: 60px;
  /* 横屏下水平布局 */
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
}
/* 为正文区预留底部栏高度，防止被覆盖 */
.guixu-root-container.mobile-view.mobile-landscape-fullscreen .game-container {
  padding-bottom: calc(68px + env(safe-area-inset-bottom, 0));
}
/* 横屏下快速发送区域横向排列且宽度合理 */
.guixu-root-container.mobile-view.mobile-landscape-fullscreen .quick-send-container { flex-direction: row; width: auto; }
.guixu-root-container.mobile-view.mobile-landscape-fullscreen .quick-send-input { width: min(56vw, 560px); height: 40px; }
/* 左侧“状态一览”按钮靠左 */
.guixu-root-container.mobile-view.mobile-landscape-fullscreen #btn-status-pop { justify-self: flex-start; }
/* 安全区（打孔屏/曲面屏）适配 */
@supports (padding: max(0px)) {
  .guixu-root-container.mobile-view.mobile-landscape-fullscreen .bottom-status {
    padding-left: max(12px, env(safe-area-inset-left, 0));
    padding-right: max(12px, env(safe-area-inset-right, 0));
  }
}
/* 视觉微调：居中输入与按钮 */
.guixu-root-container.mobile-view.mobile-landscape-fullscreen .bottom-status { justify-content: center !important; }
.guixu-root-container.mobile-view.mobile-landscape-fullscreen #btn-status-pop {
  position: absolute !important;
  left: max(12px, env(safe-area-inset-left, 0)) !important;
  top: 50% !important;
  transform: translateY(-50%) !important;
}
/* 横屏下输入容器居中且不拉满 */
.guixu-root-container.mobile-view.mobile-landscape-fullscreen .quick-send-container {
  margin: 0 auto !important;
  width: auto !important;
}
/* 收敛输入宽度，平板友好 */
.guixu-root-container.mobile-view.mobile-landscape-fullscreen .quick-send-input {
  width: clamp(320px, 44vw, 520px) !important;
  height: 40px !important;
}

/* 横屏全屏下，按钮间距略放大以匹配 40px 高度的视觉平衡 */
.guixu-root-container.mobile-view.mobile-landscape-fullscreen .quick-send-container .qs-left.qs-left--two-btn {
  gap: 10px;
}

/* 横屏移动端全屏：为正文区预留的 padding 区域提供与正文一致的底色，避免最下方出现一截明暗不一致 */
.guixu-root-container.mobile-view.mobile-landscape-fullscreen .game-container {
  background: rgba(0, 0, 0, 0.2);
}
